:root { --bg:#0f1222; --card:#151a33; --text:#e8ebff; --muted:#9ca3c9; --accent:#7aa2ff; --line:rgba(255,255,255,0.08);
        --ok:#1fbf75; --warn:#f0c94d; --err:#ff6b6b; --idle:#7b8ab8; }
*{ box-sizing:border-box; } html,body{ height:100%; }
body{ margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial; background: radial-gradient(1200px 600px at 70% -10%, #1f2550, #0f1222); color:var(--text); }
.container{ min-height:100%; display:grid; grid-template-rows:auto 1fr; }
header{ display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-bottom:1px solid var(--line); background:rgba(0,0,0,0.15); backdrop-filter: blur(6px); position: sticky; top:0; z-index:3; }
.brand{ display:flex; align-items:center; gap:10px; } .brand .dot{ width:34px; height:34px; border-radius:10px; background:#232b48 url('icons/icon-192.png') center/cover no-repeat; border:1px solid rgba(255,255,255,0.18); }
.brand h1{ font-size:18px; margin:0; letter-spacing:0.3px; }
.userbox{ display:flex; align-items:center; gap:10px; }
.avatar{ width:34px; height:34px; border-radius:50%; display:grid; place-items:center; background:#2b325a; border:1px solid rgba(255,255,255,0.18); font-weight:700; }
.username{ font-size:14px; color:var(--muted); }
.status-badge{ padding:6px 10px; border-radius:999px; border:1px solid var(--line); font-size:12px; }
.status-idle{ background:rgba(123,138,184,0.15); color:var(--idle); }
.status-warn{ background:rgba(240,201,77,0.15); color:var(--warn); }
.status-ok{ background:rgba(31,191,117,0.15); color:var(--ok); }
.status-err{ background:rgba(255,107,107,0.15); color:var(--err); }

.grid{ display:grid; gap:14px; padding:16px; align-items:start; grid-template-columns: 1fr; }
.card{ background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); border:1px solid var(--line); border-radius:16px; padding:16px; box-shadow:0 10px 30px rgba(0,0,0,0.35); }
.section-title{ display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
.muted{ color:var(--muted); }
.btn{ padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.18); background:#0f1328; color:var(--text); cursor:pointer; }
.btn.primary{ background:linear-gradient(180deg,#7aa2ff,#5878cf); border:0; color:white; }
.btn.google{ background:white; color:#1a1a1a; border:0; }
.btn.danger{ border-color:#ff6b6b; color:#ffaaaa; } .btn.small{ padding:6px 8px; border-radius:10px; font-size:12px; }
.row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.chip{ padding:8px 10px; border-radius:999px; border:1px dashed var(--line); color:var(--muted); font-size:12px; }
.hidden{ display:none !important; }

input, select, textarea{ width:100%; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.12); background:#0f1328; color:var(--text); outline:none; }
input[type="color"]{ padding:0; height:38px; }
label{ font-size:13px; color:var(--muted); margin:10px 0 6px; display:block; }
.two{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.log-buttons{ display:flex; gap:8px; flex-wrap:wrap; }

.list{ display:grid; gap:8px; }
.table-wrap{ overflow:auto; border:1px solid var(--line); border-radius:12px; }
table{ width:100%; border-collapse:collapse; min-width:780px; }
th, td{ padding:10px 12px; border-bottom:1px solid var(--line); text-align:left; }
thead th{ font-size:12px; color:var(--muted); background:rgba(255,255,255,0.03); position:sticky; top:0; }
tbody tr:hover{ background:rgba(255,255,255,0.03); }

.entry{ display:flex; justify-content:space-between; align-items:center; background:#0f1328; border:1px solid var(--line); padding:10px 12px; border-radius:10px; }
.entry .meta{ font-size:12px; color:var(--muted); }

.calendar, .chart-area{ background:#0f1328; border:1px solid var(--line); border-radius:12px; padding:12px; }
.cal-grid{ display:grid; grid-template-columns: repeat(7, 1fr); gap:4px; }
.cal-cell{ min-height:80px; background:#12183a; border:1px solid rgba(255,255,255,0.06); border-radius:8px; padding:6px; position:relative; }
.cal-cell .d{ position:absolute; top:6px; right:6px; font-size:11px; color:var(--muted); }
.pill{ padding:2px 8px; font-size:11px; border-radius:999px; border:1px solid rgba(255,255,255,0.18); display:inline-flex; align-items:center; justify-content:center; min-width:10px; min-height:18px; margin:2px 0; }
.dot{ width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:6px; }

canvas{ width:100%; height:220px; }
.legend{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom:8px; }
.checkbox-group{ display:flex; flex-wrap:wrap; gap:8px; }
.measure-sub{ margin-left:16px; display:flex; gap:8px; flex-wrap:wrap; }

dialog{ border:1px solid var(--line); border-radius:16px; padding:16px; background:#101433; color:var(--text); width:min(720px, 94vw); }
dialog::backdrop{ background:rgba(0,0,0,0.5); }
.modal-row{ display:grid; grid-template-columns:1fr 1fr 1fr 1fr; gap:8px; align-items:end; }
.modal-row-2{ display:grid; grid-template-columns:1fr 1fr; gap:8px; align-items:end; }
.meas-row{ display:grid; grid-template-columns:1.3fr .9fr 1fr 1fr auto; gap:8px; align-items:end; }

/* Disabled app state */
.app-disabled main{ filter: grayscale(0.8) brightness(0.9); }
.app-disabled .card, .app-disabled .btn{ pointer-events:none; }
.app-disabled #logoutBtn, .app-disabled #googleBtn{ pointer-events:auto; }

#offlineMask{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.55); backdrop-filter: blur(3px); z-index:1000; }
#offlineMask .panel{ background:#0f1328; border:1px solid var(--line); border-radius:16px; padding:18px; max-width:520px; box-shadow:0 12px 40px rgba(0,0,0,0.5); }
#offlineMask h3{ margin:0 0 8px 0; }
#offlineMask p{ margin:6px 0; color:var(--muted); }


/* Generic modal container 
#connect-modal, .connect-modal, #gd-modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;                 
  transition: opacity .18s ease, transform .18s ease;
  opacity: 1;
}

/* Backdrop 
#connect-modal .backdrop,
.connect-modal .backdrop,
#gd-modal .backdrop {
  position: absolute;
  inset: 0;
  background: rgba(3, 7, 18, 0.65);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
}

/* Dialog panel 
#connect-modal .panel,
.connect-modal .panel,
#gd-modal .panel {
  position: relative;
  min-width: 320px;
  max-width: 520px;
  margin: 24px;
  border-radius: 14px;
  border: 1px solid rgba(148,163,184,.16);
  background: rgba(17,23,41,.92);
  box-shadow: 0 24px 60px rgba(0,0,0,.5);
  padding: 18px 18px 16px 18px;
}

/* Close button 
.gdmodal-close {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(3, 105, 161, 0.08);
  color: #e5e7eb;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
}
.gdmodal-close:hover {
  filter: brightness(1.1);
}

/* Hidden state: no clicks, visually gone 
#connect-modal[aria-hidden="true"],
.connect-modal[aria-hidden="true"],
#gd-modal[aria-hidden="true"],
#connect-modal.is-hidden,
.connect-modal.is-hidden,
#gd-modal.is-hidden {
  opacity: 0;
  pointer-events: none;     /* prevents overlay from blocking buttons 
}
*/